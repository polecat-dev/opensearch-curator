---
# Convert Index to Remote Storage - Using Existing Snapshot
# Restores from existing snapshot as remote-backed indices
# Useful when you already have a recent backup
actions:
  1:
    action: convert_index_to_remote
    description: "Convert indices using existing snapshot (no new snapshot created)"
    options:
      # Repository containing the snapshot
      repository: backup
      
      # Existing snapshot name (must already exist!)
      snapshot_name: 'logs-snapshot-20251124'
      
      # Use existing snapshot instead of creating new
      use_existing_snapshot: True
      
      # Suffix for remote indices
      remote_index_suffix: '_remote'
      
      # Create alias pointing to remote index
      create_alias: True
      
      # Keep original indices
      delete_after: False
      
      # Verify remote index
      verify_availability: True
      
      # Restore settings
      ignore_unavailable: False
      partial: False
      wait_for_completion: True
      wait_interval: 9
      max_wait: -1
      skip_repo_fs_check: False
      
      # Action control
      disable_action: false  # Set to False to enable!
      continue_if_exception: False
      
    filters:
    - filtertype: pattern
      kind: prefix
      value: logs-
      exclude: False
    - filtertype: age
      source: name
      timestring: '%Y.%m.%d'
      direction: older
      unit: days
      unit_count: 1
      exclude: False
